
% 1 columna por iteracion 
% 18 filas en total 

beacon_positions = [ 10.0, 10.0,  10.0;
				  2.0,  2.0,  0.0;
					 10.0,-10.0,  5.0;
					-10.0,-10.0,  10.0;
				-10.0, 10.0,  5.0]


RESULT_X = [-1.06 -0.27 0.47 0.03 0.01 1.68;
-0.33 -0.29 3.10 0.00 0.01 4.14;
-0.23 -0.01 4.47 0.56 -0.00 4.82;
0.84 0.52 4.57 1.66 -0.02 4.81;
2.54 -0.07 5.12 2.72 -0.04 4.80;
3.29 0.06 4.24 3.77 -0.05 4.79;
4.14 -0.10 4.99 4.78 -0.06 4.78;
4.98 -0.60 5.06 5.78 -0.08 4.78;
6.09 -0.25 4.90 6.80 -0.09 4.77;
7.67 0.19 4.69 7.20 0.55 4.74;
7.66 0.97 4.75 7.17 1.62 4.74;
7.56 2.07 4.92 7.14 2.62 4.74;
7.36 3.29 4.84 7.12 3.67 4.75;
6.86 4.01 5.40 7.12 4.71 4.75;
7.30 5.24 4.80 7.12 5.72 4.75;
7.16 5.85 4.83 7.13 6.74 4.75;
6.60 7.39 4.82 6.49 7.14 4.72;
5.80 7.20 5.52 5.43 7.09 4.73;
4.58 7.19 4.46 4.41 7.05 4.73;
3.78 7.01 5.01 3.37 7.03 4.74;
2.84 7.43 4.30 2.33 7.03 4.74;
1.47 6.77 4.90 1.31 7.03 4.74;
0.67 6.86 5.33 0.28 7.03 4.75;
-1.15 7.02 5.37 -0.73 7.04 4.75;
-1.76 6.51 5.27 -1.70 7.05 4.75;
-2.14 7.04 4.76 -2.71 7.06 4.75;
-3.21 6.86 3.92 -3.72 7.07 4.75;
-4.27 7.07 4.70 -4.74 7.08 4.75;
-5.23 7.19 5.61 -5.75 7.09 4.75;
-6.12 7.09 5.32 -6.76 7.11 4.75;
-7.11 6.83 4.72 -7.12 6.51 4.73;
-7.22 6.16 5.24 -7.08 5.43 4.73;
-7.39 4.62 4.47 -7.05 4.37 4.73;
-7.26 3.40 4.38 -7.03 3.33 4.74;
-7.10 2.65 4.14 -7.02 2.30 4.74;
-6.81 2.38 3.86 -7.02 1.30 4.74;
-7.34 0.87 4.52 -7.02 0.30 4.75;
-6.82 -0.56 5.93 -7.03 -0.75 4.75;
-7.01 -1.86 5.30 -7.04 -1.72 4.75;
-6.92 -2.60 4.68 -7.05 -2.73 4.75;
-7.39 -3.53 4.96 -7.06 -3.76 4.75;
-7.24 -4.61 5.08 -7.07 -4.77 4.75;
-7.37 -4.75 5.16 -7.08 -5.76 4.75;
-7.05 -6.55 3.06 -7.09 -6.74 4.76;
-6.59 -7.03 4.92 -6.50 -7.15 4.72;
-6.29 -6.88 4.50 -5.42 -7.10 4.73;
-5.23 -7.53 3.86 -4.36 -7.05 4.73;
-3.86 -7.24 3.51 -3.32 -7.03 4.74;
-3.15 -8.01 3.29 -2.28 -7.02 4.74;
-1.51 -7.65 3.95 -1.31 -7.02 4.74;
-0.45 -7.02 2.96 -0.29 -7.02 4.75;
0.77 -7.25 4.42 0.73 -7.03 4.75;
1.15 -7.39 4.82 1.74 -7.04 4.75;
2.24 -7.54 4.40 2.77 -7.05 4.75;
3.41 -6.65 5.29 3.77 -7.06 4.75;
4.14 -7.05 5.52 4.73 -7.07 4.75;
5.52 -7.39 5.07 5.74 -7.08 4.75;
6.62 -7.08 5.20 6.75 -7.10 4.75;
7.25 -6.41 4.63 7.15 -6.49 4.73;
6.60 -6.13 4.38 7.11 -5.41 4.73;
7.11 -5.17 3.79 7.08 -4.35 4.73;
6.91 -3.82 4.06 7.06 -3.34 4.74;
6.80 -2.45 3.25 7.05 -2.32 4.74;
6.74 -2.40 4.40 7.05 -1.30 4.74;
7.31 -0.64 3.98 7.06 -0.28 4.75;
7.03 1.15 5.53 6.98 1.65 5.34;
7.20 3.20 5.66 6.28 3.97 6.14;
5.48 5.27 7.56 4.89 5.89 6.92;
3.73 7.45 6.74 2.84 7.31 7.74;
1.43 7.20 9.02 0.49 7.94 8.54;
-1.42 8.35 8.27 -1.93 7.73 9.33;
-3.45 7.42 9.97 -4.16 6.70 10.14;
-5.37 6.28 11.49 -5.88 4.96 10.94;
-6.06 3.62 12.15 -6.88 2.82 11.72;
-7.11 1.62 12.30 -7.09 0.41 12.51;
-7.27 -0.84 13.14 -6.45 -1.96 13.32;
-6.66 -3.53 13.58 -5.05 -3.94 14.12;
-3.80 -5.59 14.89 -3.00 -5.35 14.95;
-1.76 -5.58 16.07 -0.65 -5.95 15.75;
1.08 -6.17 17.14 1.80 -5.70 16.56;
3.07 -5.41 17.13 4.01 -4.62 17.38;
5.09 -3.94 18.33 5.65 -2.94 18.15;
5.75 -1.44 18.88 6.67 -0.70 18.96;
6.84 1.03 19.37 6.86 1.75 19.77;
6.45 3.23 19.76 6.18 4.14 20.58;
6.33 4.97 20.96 4.72 6.13 21.39;
4.85 7.49 21.86 2.70 7.48 22.18;
1.95 8.35 22.89 0.40 8.05 22.95;
-0.63 8.83 23.09 -2.02 7.80 23.74;
-3.97 7.21 24.18 -4.23 6.73 24.54]

RESULT_X = RESULT_X'



%Representacion en 3D
figure;
plot3(RESULT_X(1,:),RESULT_X(2,:),RESULT_X(3,:),'.-b','LineWidth',1.1);grid;title('Representación de la trayectoria 3D');
xlabel('X (m)');ylabel('Y (m)');zlabel('Z (m)');
hold on;
plot3(RESULT_X(4,:),RESULT_X(5,:),RESULT_X(6,:),'.-r','LineWidth',1.1);
hold off;
% hold on;
% plot3(x_filtrada,y_filtrada,z_filtrada,'.-k','LineWidth',1.1);
% hold off;
hold on;
plot3(beacon_positions(1,1),beacon_positions(1,2),beacon_positions(1,3),'k*');
plot3(beacon_positions(2,1),beacon_positions(2,2),beacon_positions(2,3),'g*');
plot3(beacon_positions(3,1),beacon_positions(3,2),beacon_positions(3,3),'c*');
plot3(beacon_positions(4,1),beacon_positions(4,2),beacon_positions(4,3),'m*');
plot3(beacon_positions(5,1),beacon_positions(5,2),beacon_positions(5,3),'b*');
legend('Trayectoria real','Trayectoria estimada','Baliza 1','Baliza 2','Baliza 3','Baliza 4','Baliza 5');
hold off;

%Representacion de cada coordenada
figure;
title('Representación de cada coordenada');
subplot(3,1,1);
plot([1:1:length(RESULT_X(1,:))],RESULT_X(4,:),'r');grid;
xlabel('Tiempo (s)');ylabel('X (m)');
hold on;
plot([1:1:length(RESULT_X(1,:))],RESULT_X(1,:),'b');
hold off;
subplot(3,1,2);
plot([1:1:length(RESULT_X(1,:))],RESULT_X(5,:),'r');grid;
xlabel('Tiempo (s)');ylabel('Y (m)');
hold on;
plot([1:1:length(RESULT_X(1,:))],RESULT_X(2,:),'b');
hold off;
subplot(3,1,3);
plot([1:1:length(RESULT_X(1,:))],RESULT_X(6,:),'r');grid;
xlabel('Tiempo (s)');ylabel('Z (m)');
hold on;
plot([1:1:length(RESULT_X(1,:))],RESULT_X(3,:),'b');
hold off;

%Representaciones de los errores
figure;
title('Errores en cada coordenada');
subplot(3,1,1);
plot([1:1:length(RESULT_X(1,:))],abs(RESULT_X(1,:)-RESULT_X(4,:)));grid;
xlabel('Tiempo (s)');ylabel('Error en X (m)');
subplot(3,1,2);
plot([1:1:length(RESULT_X(1,:))],abs(RESULT_X(2,:)-RESULT_X(5,:)));grid;
xlabel('Tiempo (s)');ylabel('Error en Y (m)');
subplot(3,1,3);
plot([1:1:length(RESULT_X(1,:))],abs(RESULT_X(3,:)-RESULT_X(6,:)));grid;
xlabel('Tiempo (s)');ylabel('Error en Z (m)');
% hold on;
% plot(t,abs(RESULT_X(3,:)-z_filtrada));
% hold off;

disp('Error en z medio:');
media_error = sum(abs(RESULT_X(3,:)-RESULT_X(6,:)))/size(RESULT_X,2);
disp(media_error);